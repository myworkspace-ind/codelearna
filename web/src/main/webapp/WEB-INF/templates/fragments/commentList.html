<!-- Fragment for comment list with pagination -->

<div th:fragment="commentList">
    <ul class="comment-list" id="comment-list">
        <li th:each="comment : ${comments}" class="comment-item parent-comment">
            <div class="comment-content">
                <img th:src="${comment.user.avatarUrl}" alt="Avatar" class="avatar parent-avatar">
                <div class="comment-text">
                    <span class="comment-username" th:text="${comment.user.name}">Username</span>
                    <p th:text="${comment.content}">Comment content</p>
                </div>
                <button class="reply-btn" th:attr="data-comment-id=${comment.id}">Reply</button>
            </div>

            <!-- Reply input area -->
            <div class="reply-section" style="display: none;" th:attr="data-comment-id=${comment.id}">
                <textarea class="reply-textarea" placeholder="Enter your reply..." rows="2"></textarea>
                <button class="submit-reply-btn">Submit Reply</button>
            </div>

            <!-- List of child comments -->
            <ul class="child-comments" th:if="${comment.childComments}">
                <li th:each="childComment : ${comment.childComments}" class="comment-item child-comment">
                    <div class="comment-content">
                        <img th:src="${childComment.user.avatarUrl}" alt="Avatar" class="avatar child-avatar">
                        <div class="comment-text">
                            <span class="comment-username" th:text="${childComment.user.name}">Username</span>
                            <p th:text="${childComment.content}">Comment content</p>
                        </div>
                    </div>
                </li>
            </ul>
        </li>
    </ul>

    <!-- Pagination controls -->
    <div class="pagination" th:if="${totalPages > 1}">
        <button th:if="${currentPage > 0}" class="page-btn" th:attr="data-page=${currentPage - 1}">Previous</button>
        <span th:each="pageNum : ${#numbers.sequence(0, totalPages - 1)}">
            <button class="page-btn" th:text="${pageNum + 1}" th:attr="data-page=${pageNum}" th:classappend="${pageNum == currentPage} ? 'active'"></button>
        </span>
        <button th:if="${currentPage < totalPages - 1}" class="page-btn" th:attr="data-page=${currentPage + 1}">Next</button>
    </div>
</div>
